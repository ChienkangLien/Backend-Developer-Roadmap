# Database Sharding
在海量資料的儲存情境下，DB 的效能會受到影響，此時透過垂直擴充架構也許是無法滿足的，因此會需要以水平擴展的方式來提升效能。
* Horizontal Partitioning 水平分區
在同一個資料庫中將 table 拆成數個小 table，因此總行數都減少了。通常用於優化資料表的查詢性能、維護和管理資料，讓查詢更快速。
* Sharding 分片
將 table 放到數個資料庫中。適合需要擴展性和高性能的應用場景，特別是大型互聯網應用或分布式系統，以便更有效地處理大量資料和高並發。

## 分片方式
### 哈希分片（Hash-based Sharding）
根據資料的哈希值來分割資料，通常使用資料的部分或全部屬性計算哈希值，然後得出目標要存取的資料庫。

優點：
* 均勻分佈數據，防止負載不平衡。
* 適合資料順序不重要的情況。
* 可擴展且易於實施。

缺點：
* 檢索特定範圍的資料可能很複雜。
* 隨著資料量的成長，分片重新平衡可能具有挑戰性。
* 新增或刪除分片可能需要重新整理資料。
### 範圍分片（Range-based Sharding）
根據資料某個欄位的範圍來分割資料，例如按照日期、地區或其他範圍來劃分資料。當資料呈現自然排序且查詢通常針對特定範圍時，此方法適用。

優點：
* 由於資料有序分佈，因此範圍查詢非常有效率。
* 透過刪除整個分片來促進資料歸檔和清除。
* 適用於時間序列資料和歷史記錄。

缺點：
* 如果資料分佈不均勻，則分片大小不平衡
* 處理傾斜資料分佈的挑戰
### 目錄分片(Directory-Based Sharding)
在目錄分片中，有一個中央目錄（或者稱為元數據、元資料服務）用於存儲關於資料分片位置和資料範圍的信息。這個中央目錄可以幫助系統快速地識別和查找資料所在的分片位置。

優點：
* 簡化分片管理和重新平衡的過程。
* 動態地管理和更新資料分片的信息。

缺點：
* 由於需要單獨的中央目錄，增加了複雜性。
* 元資料查找導致的效能開銷。
* 中央目錄中潛在的單點故障。

### 地理分區(Geo-Based Sharding)
對於具有全球影響力的分散式系統和應用程式尤其重要。根據資料來源或使用者的地理位置或接近程度來劃分資料，從而減少延遲並提高效能。

優點：
* 減少了全球應用程式的延遲並改善了用戶體驗。
* 對於地理空間查詢和位置感知應用程式非常有效。

缺點：
* 由於需要確定資料位置，實施起來很複雜。
* 保持跨地理區域的數據分佈一致可能具有挑戰性。
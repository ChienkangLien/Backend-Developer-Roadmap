# SOA
服務導向架構 (SOA，service-oriented architecture)是一種軟體開發方法，它使用稱為服務的軟體元件來建立業務應用程式。每個服務都提供一種業務功能，服務之間還可以跨平台、跨語言進行通訊。開發人員使用 SOA 在不同系統中重複利用服務，或組合幾個獨立的服務來執行複雜的任務。

例如，某個組織的多個業務流程需要使用者身分驗證功能。該組織無需為所有業務流程重寫身分驗證程式碼，而只需建立一個身分驗證服務，再將該服務用於所有應用程式。

SOA中的一項服務應有以下四個特性：
1. 針對某特定要求的輸出，該服務就是運作一項商業邏輯
2. 具有完備的特性（self-contained）
3. 消費者並不需要瞭解此服務的運作過程
4. 可能由底層其他服務組成

## 與微服務的差異
SOA（服務導向架構）和微服務架構都是以服務為核心的架構模式，但它們有一些關鍵差異：

規模和粒度：
* SOA 通常關注於將整個企業的 IT 資源組織為一系列服務，這些服務可能覆蓋多個業務功能和應用程序。
* 微服務架構則更加關注於將單個應用程序或業務功能劃分為小型、自治的服務單元。


服務邊界：
* SOA 中的服務通常是較大粒度的，可以跨越多個業務功能和應用程序。這些服務可能比較通用，為多個應用程序提供支持。
* 微服務通常是更小的、更專注於特定功能或業務領域的服務單元，服務邊界更為明確。


部署和獨立性：
* SOA 中的服務可能會部署在不同的服務器上，但可能不會有像微服務那樣的獨立部署能力。它們通常更為集中管理。
* 微服務強調獨立部署、獨立演化，每個微服務可以獨立部署、擴展和更新，更具自治性。


技術棧和通訊協議：
* SOA 通常可以使用多種通信協議（例如 SOAP、RESTful Web Services 等）和技術棧（例如 ESB）。
* 微服務架構通常采用輕量級通信協議（例如 HTTP、JSON 或者消息隊列），並且技術棧更多樣化。

粒度和覆雜性：
* SOA 服務可能比較覆雜，服務粒度更大，服務之間的耦合度可能相對較高。
* 微服務的服務粒度更小，更簡單，它們之間的松耦合性更強，更易於管理。


總體而言，微服務可以看作是 SOA 的一種演變和精細化。它強調更小的服務粒度、獨立部署、自治性，以及更靈活的技術選型和通信協議。微服務更適用於需要敏捷開發、快速叠代和強調獨立性的現代應用。而 SOA 則更適用於需要統一管理、跨組織或跨企業的大規模服務集成的場景。

## ESB
Enterprise Service Bus（企業服務總線）是一種核心組件，用於實現不同服務之間的通信、集成和協調。ESB 提供了一種集成的基礎設施，用於連接和管理服務，以便它們可以相互通信並共同提供企業級的功能。

* 消息路由和中介：充當消息的中介，負責消息的傳遞、路由和轉發。它可以接收來自不同服務的消息，根據預定義的路由規則將消息傳遞給目標服務。
* 消息轉換和協議適配：能夠處理不同服務之間的協議和數據格式差異，進行消息的轉換和適配，使得不同服務能夠互相通信並理解彼此的消息格式。
* 服務編排：允許對服務進行編排和組合，以實現覆雜的業務流程和功能。它可以將多個服務連接在一起，形成一個整體的業務流程。
* 安全性和可靠性：提供安全的消息傳輸機制，包括身份驗證、授權和加密。它也提供了可靠的消息傳遞機制，確保消息的完整性和可靠性。
* 監控和管理：具有監控和管理功能，可以對消息流和服務性能進行監控和管理，以及進行故障排除和性能優化。

總的來說，ESB 在服務導向架構中充當了一個關鍵的集成層，它使得不同的服務能夠相互連接、通信和協同工作。然而，隨著微服務架構的興起，一些組織開始轉向更輕量級和更分散的集成方式，逐漸減少對傳統的ESB的依賴。